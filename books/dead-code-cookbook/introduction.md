---
title: "はじめに"
---

# 本書の目的

デッドコードは、 **プログラムの一部として存在するが、決して実行されないコード** のことである。一時的な変更等でデッドコードを作る場合もあるが、多くの場合は **バグ（プログラム自体の誤り）の可能性が極めて高い** だろう。例えば **[goto fail bug](https://ja.wikipedia.org/wiki/%E5%88%B0%E9%81%94%E4%B8%8D%E8%83%BD%E3%82%B3%E3%83%BC%E3%83%89#%E8%84%86%E5%BC%B1%E6%80%A7%E3%81%A8%E5%88%B0%E9%81%94%E4%B8%8D%E8%83%BD%E6%80%A7)** がデッドコードを含んだ有名なバグの実例だ。

そのため、理想的にはプログラミング言語レベルでデッドコードを検知し、警告出力や実行不可などの対応をとることが望ましい。実際に、特定のパターンのデッドコードは言語仕様上許されていない場合もある。

しかし、任意のコードが到達不能(デッドコード)かどうかを判断することは停止性問題を解くことと等価であり、あらゆるデッドコードを正しく把握することは不可能である[^1]。デッドコードを完全に排除している汎用プログラミング言語は、今のところ存在していないだろう。

[^1]: 出典) https://ja.wikipedia.org/wiki/%E5%88%B0%E9%81%94%E4%B8%8D%E8%83%BD%E3%82%B3%E3%83%BC%E3%83%89#%E5%88%B0%E9%81%94%E4%B8%8D%E8%83%BD%E6%80%A7%E3%81%AE%E6%A4%9C%E8%A8%BC

**では、実際のプログラミングのコードには、どのようなデッドコードのパターンがあるのだろうか？**

この疑問の答えを求めるのが本書である。

デッドコードのパターンを整理するためには、プログラミングのパターンを整理する必要がある。それは、単なるデッドコードを回避するという直接的な理由以外に、プログラミングのパターンやスタイルについての理解を深めることにも繋がるだろう。

デッドコードが実行可能かどうかは、プログラミング言語によっても異なる。また、あるプログラミング言語ではデッドコードとなるパターンであっても、高度な機能を用いることで、別のプログラミング言語ではコードを通すことが出来る場合もあるだろう。そのため、デッドコードのパターンを整理し、プログラミング言語毎の、具体例を確認することで、各プログラミング言語への理解を深めることにも繋がるだろう。

**本書の目的は、デッドコードのパターンを通して、プログラミングのパターンやスタイルへの理解を深め、また、プログラミング言語についても理解を深めることで、より良いコーディングが出来るようになることである。**

**本書は意図的に明らかなバグを含むコード(毒薬)を作るためのレシピ集ではない。**
見つけ難い不具合を意図的に埋め込むためではなく、不具合を回避しやすいより良いコードを作成するためにのみ活用してほしい。

# 用語の定義と対象範囲

### デッドコード

本書のデッドコードは、実行時のコード(機械語、あるいは元のプログラムよりも低い水準のコード)を対象外として考慮しない。

そのため、大半のオプティマイザで削除されるであろう、未参照変数に対する代入も、デッドコードのパターンには含めない。

また、別のプログラミング言語では、デッドコードとなるが、

また、類義語である到達不能コードとの使い分けは行わない。本書ではデッドコードで統一する。

到達不能コードに意味は違うが、厳密に到達不能であるかどうかは問わない。
厳密に到達不能でないものを、到達可能にするものを復活の呪文という。


# サンプルコードと実行環境

未使用のデータ項目に対するデッドコードは対象外

I am already dead!!

## 対象言語と環境

|プログラミング言語|Dockerタグ|
|:--|:--|
|C言語||
|Python||
|JavaScript||
|Ruby|ruby:2.7.2-buster|
|Go||
|Java||
|TypeScript||
|Rust||

環境構築は別章とする。

``` console
docker run --rm -v $ZENN_HOME/books/dead-code-cookbook/src/ruby:/app/ruby ruby:2.7.2-buster ruby /app/ruby/hello_world.rb
```

# 読者へのおねがい

筆者はプログラミングの経験が不十分。（特に高度な機能）
パターンも他に有るだろうし、言語のサンプルが充分でないこともある。
プルリクをして欲しい。もしくは、Qiitaでもいいだろう。ハッシュタグで呟いてもいいし、

2020年度のアドベンドカレンダー形式の本とする試み。

これは、時間をかけてじっくり読んでもらう事で、いろんな意見がもらえるのではないか？という意図がある。

全てに目を通すことは難しいかもしれないが、時間をかけて可能な限り本書に反映していくつもりがある。

# レシピ(目次)

1.リテラルを利用した条件式
2.定数/グローバルプロパティを利用した条件式
3.return後のコード
4.throw後のコード
5.break/continue後のコード
6.条件の重ねあわせ。分岐のネスト
7.条件の重ね合わせ。switch
8.空配列のeach
9.正規表現の利用
10.プライベートメソッドの活用
11.関数の上書き
12.メソッドとオーバーライド
13.メソッドチェーンの利用
14.整数値に対する演算の使用 範囲
15.整数値に対する演算の使用 2じょう
16.文字列の活用
17.マクロの利用
18.組み込み例外の利用
19.ソースコードの取得とevalの利用
20.catchの利用
21.gotoの利用
22.never型の利用？
23.ワンライナーの利用"goto fail bug"
24.三項演算子
25.プロミス？
26.exit。大域脱出？
